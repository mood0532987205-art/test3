{# ================== Store Header ================== #}
{% set important_links = theme.settings.get('important_links') %}
<header class="store-header border-b border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-900 transition-colors duration-300">
  
  {# --- Top Nav --- #}
  <div class="top-navbar text-sm hidden md:block">
    <div class="container flex justify-between items-center py-2">
      
      <div class="flex items-center gap-3">
          {# Footer Menu #}
          {% if important_links %}
            <salla-menu source="footer" topnav></salla-menu>
          {% endif %}

          {# Language & Currency Component #}
          {% if store.settings.is_multilingual or store.settings.currencies_enabled %}
              <button type="button" onclick="salla.event.dispatch('localization::open')" 
                      class="flex items-center gap-2 px-2 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition">
                  <span class="flag iti__flag iti__{{ user.language.country_code }} rounded-sm"></span>
                  <span class="text-xs">|</span> 
                  <span class="font-medium">{{ currency.symbol }}</span>
              </button>
              <salla-localization-modal></salla-localization-modal>
          {% endif %}

          {# Scopes | Branches #}
          {% if store.scope %}
              <button class="flex items-center gap-1 px-2 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800"
                      onclick="salla.event.dispatch('scopes::open', {'mode': 'default'})">
                  <i class="sicon-location"></i> <span>{{ store.scope.name }}</span>
              </button>
          {% endif %}
      </div>

      <salla-contacts is-header></salla-contacts>
    </div>
  </div>

  {# --- Main Nav --- #}
  <div id="mainnav" class="main-nav-container shadow-sm bg-white dark:bg-gray-900 sticky top-0 z-50">
      <div class="container">
          <div class="flex items-center justify-between py-3">
            
              {# Left Section #}
              <div class="flex items-center gap-3">
                  <a class="lg:hidden mburger" href="#mobile-menu" aria-label="Open-menu">
                      <i class="sicon-menu text-primary text-2xl"></i>
                  </a>
                  
                  <a class="navbar-brand flex items-center" href="{{ store.url }}">
                      <img fetchpriority="high" loading="eager" class="h-10 w-auto" src="{{ store.logo }}" alt="{{ store.name }} logo">
                      {% if is_page('index') %}
                        <h1 class="sr-only">{{ store.name }}</h1>
                      {% else %}
                        <h2 class="sr-only">{{ store.name }}</h2>
                      {% endif %}
                  </a>

                  <custom-main-menu class="hidden md:block"></custom-main-menu>
              </div>

              {# Right Section #}
              <div class="flex items-center gap-3">
                  {# Search (desktop only) #}
                  <div class="hidden md:block w-56">
                      <salla-search inline oval height="36"></salla-search>
                  </div>

                  {# User Menu #}
                  {% if user.type=='user' %}
                    <salla-user-menu avatar-only show-header></salla-user-menu>
                  {% else %}
                      <button class="header-btn" aria-label="user-icon" onclick="salla.event.dispatch('login::open')">
                        <i class="header-btn__icon sicon-user-circle"></i>
                      </button>
                  {% endif %}

                  {# Cart Summary with Badge #}
                  <salla-cart-summary class="relative">
                    <i slot="icon" class="header-btn__icon icon sicon-shopping-bag"></i>
                    {% if cart.items_count > 0 %}
                      <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full px-1">
                          {{ cart.items_count }}
                      </span>
                    {% endif %}
                  </salla-cart-summary>
              </div>
          </div>
      </div>
  </div>
</header>

{# --- Scopes Popup --- #}
{% if store.scope %}
    <salla-scopes selection="{{ store.scope.display_as == 'popup' ? 'mandatory' : 'optional' }}"></salla-scopes>
{% endif %}
