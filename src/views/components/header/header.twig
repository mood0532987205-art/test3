{#
| Modern Salla Theme Header Component
|=====================================
| Features:
| - Clean, modern design
| - Dark mode toggle
| - Responsive layout
| - Optimized icon sizing
| - Accessibility improvements
#}

{% set important_links = theme.settings.get('important_links') %}

<header class="store-header bg-card shadow-sm border-b border-border-color">
  {# Welcome Banner #}
  <div class="welcome-banner bg-gradient-to-r from-orange-500 to-orange-600 text-white py-2">
    <div class="container">
      <div class="flex items-center justify-center">
        <div class="flex items-center gap-2">
          <i class="sicon-gift text-lg animate-bounce"></i>
          <span class="font-medium text-sm md:text-base">WELCOME TO OUR SHOP</span>
          <i class="sicon-gift text-lg animate-bounce"></i>
        </div>
      </div>
    </div>
  </div>

  {# Top Navigation Bar #}
  <div class="top-navbar bg-secondary border-b border-border-color">
    <div class="container">
      <div class="flex items-center justify-between py-2">
        <div class="flex items-center gap-4">
          {# Footer Menu Links #}
          {% if important_links %}
            <salla-menu source="footer" topnav class="text-sm text-secondary"></salla-menu>
          {% endif %}

          {# Language & Currency Selector #}
          {% if store.settings.is_multilingual or store.settings.currencies_enabled %}
            <button 
              type="button" 
              onclick="salla.event.dispatch('localization::open')" 
              class="btn--rounded-gray flex items-center gap-2 text-sm hover:bg-tertiary transition-colors"
              aria-label="Change language or currency"
            >
              <span class="flag iti__flag iti__{{ user.language.country_code }} rounded-sm"></span>
              <span class="text-tertiary">|</span>
              <span>{{ currency.symbol }}</span>
            </button>
            <salla-localization-modal></salla-localization-modal>
          {% endif %}

          {# Store Scope/Branch Selector #}
          {% if store.scope %}
            <button 
              class="btn--rounded-gray flex items-center gap-2 text-sm hover:bg-tertiary transition-colors"
              onclick="salla.event.dispatch('scopes::open', {'mode': 'default'})"
              aria-label="Select store branch"
            >
              <i class="sicon-location icon-sm"></i>
              <span>{{ store.scope.name }}</span>
            </button>
          {% endif %}
        </div>

        {# Contact Information #}
        <salla-contacts is-header class="text-sm"></salla-contacts>
      </div>
    </div>
  </div>

  {# Main Navigation Bar #}
  <div id="mainnav" class="main-nav-container bg-card sticky-header">
    <div class="inner container">
      <div class="flex items-center justify-between py-4">
        {# Left Section - Menu Toggle & Logo #}
        <div class="flex items-center gap-6">
          {# Mobile Menu Toggle #}
          <button 
            class="lg:hidden header-btn p-2 rounded-md hover:bg-secondary transition-colors"
            aria-label="Open mobile menu"
            onclick="salla.event.dispatch('mobile-menu::open')"
          >
            <i class="sicon-menu icon-lg text-primary"></i>
          </button>

          {# Logo #}
          <a class="navbar-brand flex-shrink-0" href="{{ store.url }}" aria-label="{{ store.name }} homepage">
            <img 
              fetchpriority="high" 
              width="120" 
              height="40" 
              loading="eager" 
              src="{{ store.logo }}" 
              alt="{{ store.name }} logo"
              class="h-10 w-auto object-contain"
            >
            {% if is_page('index') %}
              <h1 class="sr-only">{{ store.name }}</h1>
            {% else %}
              <h2 class="sr-only">{{ store.name }}</h2>
            {% endif %}
          </a>

          {# Desktop Main Menu #}
          <nav class="hidden lg:block">
            <custom-main-menu></custom-main-menu>
          </nav>
        </div>

        {# Center Section - Search Bar #}
        <div class="hidden md:block flex-1 max-w-md mx-8">
          <salla-search 
            inline 
            oval 
            height="40"
            class="w-full"
            placeholder="Search products..."
          ></salla-search>
        </div>

        {# Right Section - Actions #}
        <div class="flex items-center gap-2">

          {# User Menu #}
          {% if user.type == 'user' %}
            <salla-user-menu 
              avatar-only 
              show-header
              class="header-btn"
            ></salla-user-menu>
          {% else %}
            <button 
              class="header-btn p-2 rounded-md hover:bg-secondary transition-colors"
              aria-label="Sign in or create account"
              onclick="salla.event.dispatch('login::open')"
              title="Sign in"
            >
              <i class="sicon-user-circle icon-base text-secondary hover:text-primary transition-colors"></i>
            </button>
          {% endif %}

          {# Shopping Cart #}
          <salla-cart-summary class="header-btn">
            <i 
              slot="icon" 
              class="sicon-shopping-bag icon-base text-secondary hover:text-primary transition-colors"
            ></i>
          </salla-cart-summary>
        </div>
      </div>
    </div>
  </div>

  {# Mobile Search Bar #}
  <div class="md:hidden border-t border-border-color bg-secondary">
    <div class="container py-3">
      <salla-search 
        inline 
        oval 
        height="40"
        class="w-full"
        placeholder="Search products..."
      ></salla-search>
    </div>
  </div>
</header>

{# Store Scopes Modal #}
{% if store.scope %}
  <salla-scopes 
    selection="{{ store.scope.display_as == 'popup' ? 'mandatory' : 'optional' }}"
  ></salla-scopes>
{% endif %}

{# Mobile Menu #}
<div id="mobile-menu" class="lg:hidden"></div>
